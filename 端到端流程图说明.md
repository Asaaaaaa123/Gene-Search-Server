# 端到端分析流程图说明

## 📊 流程图概述

已生成详细的 **End-to-End Analysis Pipeline** 流程图，展示了从数据输入到结果输出的完整分析流程。

## 🎯 流程图位置

- **文件路径**: `thesis_charts/end_to_end_pipeline_detailed.png`
- **文档位置**: `Thesis_Defense_Document.md` 第4节"方法/识别策略"

## 📋 流程图包含的层次

### 1. 数据输入层（蓝色）
- Excel文件（9种组织的基因表达数据）
- 基因列表文件（.txt格式）

### 2. 数据加载与验证层（黄色）
- 数据验证
- 数据清洗
- 重复检查

### 3. 数据存储层（绿色）
- MongoDB数据库
- 索引优化
- 查询优化

### 4. 用户界面层（紫色）
- Next.js前端
- 基因搜索页面
- GO分析页面
- 可视化展示

### 5. API处理层（橙色）
- FastAPI后端
- RESTful API端点
- 请求处理

### 6. 分析处理层（粉色）
- 基因搜索处理
- GO富集分析
- 主题化分析

### 7. 外部服务（浅橙色）
- GProfiler API

### 8. 可视化层（青色）
- 图表生成
- Base64编码
- 结果返回

## 🔄 流程步骤详解

### 步骤 1-3: 数据准备
1. **数据输入**: 用户提供Excel文件或基因列表
2. **数据加载**: 系统验证、清洗数据
3. **数据存储**: 存储到MongoDB，创建索引

### 步骤 4-5: 用户请求
4. **用户操作**: 在前端界面输入查询或上传文件
5. **API请求**: 前端发送HTTP请求到后端API

### 步骤 6-8: 数据处理
6. **数据库查询**: API查询MongoDB获取数据
7. **GO分析**: 调用GProfiler API进行富集分析
8. **主题化处理**: 关键词匹配，主题分组，得分聚合

### 步骤 9-11: 结果生成
9. **可视化生成**: 使用matplotlib生成图表
10. **编码返回**: 将结果编码为JSON或Base64
11. **前端展示**: 在前端界面显示结果

## 🎨 箭头颜色说明

- **蓝色箭头**: 数据加载和存储流程
- **紫色箭头**: 用户请求和响应
- **橙色箭头**: 查询处理
- **红色箭头**: 分析和外部API调用
- **绿色箭头**: 结果生成

## 📐 图表特点

- **高分辨率**: 300 DPI，适合打印和演示
- **详细标注**: 每个步骤都有清晰说明
- **颜色编码**: 不同颜色区分不同功能模块
- **流程清晰**: 箭头方向明确展示数据流向

## 🔍 在文档中查看

1. 打开 `Thesis_Defense_Document.md`
2. 找到第4节"方法/识别策略"
3. 查看"端到端分析流程"部分
4. 图表会显示在文档中

## 💡 使用建议

### 在 Thesis Defense 中：
- 使用此图解释整个系统的工作流程
- 可以按步骤详细说明每个环节
- 强调数据流向和处理逻辑

### 在论文中：
- 可以作为"方法"部分的流程图
- 展示系统的完整性和逻辑性
- 帮助读者理解系统架构

## 🔄 重新生成

如果需要修改或重新生成流程图：

```bash
python generate_detailed_pipeline.py
```

可以修改脚本中的：
- 颜色方案
- 布局位置
- 文本内容
- 箭头样式

## ✅ 检查清单

- [x] 流程图已生成
- [x] 已添加到文档中
- [x] 包含所有关键步骤
- [x] 颜色编码清晰
- [x] 箭头方向正确
- [x] 高分辨率输出

